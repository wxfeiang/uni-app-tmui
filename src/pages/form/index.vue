<script setup lang="ts">
import { FormOptions, FormProps } from "@/components/dy-form/types/types";
const dyFromRef = ref<any>(null);
// é»˜è®¤æŒ‰é’®
const formVal = ref({
  username: "admim",
  password: "123456",
  radio: 3,
  checkbox: [1],
  switch: true,
  rate: 1,
  slider: 40,
  segtab: "2",
  stepper: 20,
  pickerArr: [], // å¼¹å‡ºé€‰ä¸­çš„ å’Œç»‘å®šçš„å­—æ®µä¸ä¸€æ ·
  time: "2024å¹´5æœˆ2æ—¥",
  time3: [],
  time3Str: [],
  date: ["2024/12/13"],
  dateStr: "",
  dateArry: "",
  dateStr2: "",
  city: [],
  cityStr: "",
  keyboard: "",
  upload: ["public/uploads/image/1711870662452-0b2e2976-f237-41f9-8ce0-6c0813b3bf6c.png"],
  no: "",
  readme: null,
});
// æ•°æ®é…ç½®
const options = ref<FormOptions[]>([
  {
    type: "input",
    label: "ç”¨æˆ·å",
    prop: "username",

    formItemAttrs: {
      desc: "è¡¨å•é¡¹ç›®ç”¨æˆ·å",
      required: true,
      help: "adifnvi",
    },
    typeAttrs: {
      // suffixLabel: "å…ƒ",
      // inputPadding: [30, 20],
      // transprent: true,
      // showBottomBotder: false,
    },
  },
  {
    type: "input",
    value: "123456",
    label: "å¯†ç ",
    prop: "password",
    rulesHide: true,
    formItemAttrs: {
      desc: "è¿™ä¸ªå¯†ç å¾ˆå¤§",
    },
    typeAttrs: {
      password: true,
      disabled: false,
      // prefix: "tmicon-lock-fill",
    },
  },
  {
    type: "radio-group",
    label: "æ°´æœå•é€‰",
    prop: "radio",
    placeholder: "è¯·é€‰æ‹©",
    rulesHide: true,
    children: [
      {
        text: "è‹¹æœ",
        id: 1,
      },
      {
        text: "é¦™è•‰",
        id: 2,
      },
      {
        text: "æå­",
        id: 3,
      },
      {
        text: "æ¤°å­",
        id: 4,
      },
    ],
    formGroupAttrs: {
      a: 1,
      disabled: false,
    },
  },
  {
    type: "checkbox-group",
    label: "æ°´æœå¤šé€‰",
    prop: "checkbox",
    rulesHide: true,
    children: [
      {
        text: "è‹¹æœ",
        id: 1,
      },
      {
        text: "é¦™è•‰",
        id: 2,
      },
      {
        text: "æå­",
        id: 3,
      },
      {
        text: "æ¤°å­",
        id: 4,
      },
    ],
  },
  {
    type: "switch",
    label: "çŠ¶æ€",
    prop: "switch",

    rules: [{ required: true, message: "è¯·é€‰æ‹©çŠ¶æ€" }],
  },
  {
    type: "rate",

    label: "è¯„åˆ†",
    prop: "rate",

    rules: [{ required: true, message: "è¯·é€‰æ‹©çŠ¶æ€" }],
  },
  {
    type: "slider",
    label: "æ»‘å—",
    prop: "slider",
    rules: [{ required: true, message: "è¯·é€‰æ‹©çŠ¶æ€" }],
  },
  {
    type: "segtab",

    label: "åˆ†å‰²é€‰æ‹©",
    prop: "segtab",
    rules: [{ required: true, message: "è¯·é€‰æ‹©" }],
    typeAttrs: {
      list: [
        { text: "è‹¹æœ", id: "1" },
        { text: "å•ªå•ªå¹²", id: "2" },
      ],
    },
  },
  {
    type: "stepper",
    label: "åˆ†å‰²é€‰æ‹©",
    prop: "stepper",
    rules: [{ required: true, message: "è¯·é€‰æ‹©" }],
    typeAttrs: {
      width: 200,
      height: 62,
      //	:beforeEnter="beforeEnter"
      // color: "red",
      // linear: "bottom",
      bgColor: "red",
      // circular: true,
    },
  },
  {
    type: "picker",
    label: "å¼¹å‡ºé€‰æ‹©",
    prop: "pickerStr",
    pickerIndex: "pickerArr",
    pickerShow: false,
    rules: [{ required: true, message: "è¯·é€‰æ‹©" }],
    // formItemAttrs: {
    //   class:"flex flex-row flex-row-center-between"
    // },
    typeAttrs: {
      columns: [
        {
          text: "è‹¹æœ",
          id: 1,
        },
        {
          text: "é¦™è•‰",
          id: 2,
        },
        {
          text: "æå­",
          id: 3,
        },
        {
          text: "æ¤°å­",
          id: 4,
        },
      ],
      selectedModel: "id",
    },
  },
  {
    type: "keyboard",
    label: "ç‰¹æ®Šé”®ç›˜",
    prop: "keyboard",
    pickerShow: false,
    typeAttrs: {
      type: "card", // password card car number
      show: false,
    },
  },
  {
    type: "upload",
    label: "æˆªå›¾",
    prop: "upload",
    pickerShow: false,
    placeholder: "è¯·ä¸Šä¼ æˆªå›¾",
    rulesHide: true,
    typeAttrs: {
      rows: 1,
      width: 420,
      imageHeight: 300,
    },
  },
  {
    type: "time-picker",
    label: "æ—¶é—´é€‰æ‹©",
    prop: "time",
    pickerShow: false,
    placeholder: "è¯·é€‰æ‹©",
    rules: [{ required: true, message: "è¯·é€‰æ‹©æ—¶é—´" }],
    typeAttrs: {
      disabledDate: ["2024-5-23"],
      format: "YYYYå¹´MMæœˆDDæ—¥",
      showDetail: {
        year: true,
        month: true,
        day: true,
        hour: false,
        minute: false,
        second: false,
      },
    },
  },
  {
    type: "date-picker",
    value: "",
    label: "æ—¥å†é€‰æ‹©",
    prop: "dateStr",
    pickerIndex: "date",
    placeholder: "è¯·é€‰æ‹©",
    pickerShow: false,
    rules: [{ required: true, message: "è¯·é€‰æ‹©æ—¥æœŸ" }],
    typeAttrs: {
      // format: "YYYYå¹´MMæœˆDDæ—¥",
      model: "day", ///  day week month quarter year rang
      //start: "2024-01-01",
      // end: "2024-12-31",
    },
  },
  {
    type: "time-between",
    label: "æ—¶é—´èŒƒå›´",
    prop: "time3",
    pickerIndex: "time3Str",
    pickerShow: false,
    placeholder: "è¯·é€‰æ‹©",
    rules: [{ required: true, message: "è¯·é€‰æ‹©æ—¶é—´" }],
    // typeAttrs: {
    //   // format: "YYYYå¹´MMæœˆDDæ—¥",
    //   showDetail: { year: false, month: false, day: false, hour: true },
    // },
  },

  {
    type: "city-picker",
    label: "åœ°åŒº",
    prop: "city",
    pickerShow: false,
    pickerIndex: "cityStr",
    rules: [{ required: true, message: "è¯·é€‰æ‹©æ—¶é—´" }],
    typeAttrs: {
      // format: "YYYYå¹´MMæœˆDDæ—¥",
      showDetail: { year: true, month: true, day: true, hour: true },
    },
    formRightIconAttrs: {
      fontSize: 30,
      name: "tmicon-position",
    },
  },
  {
    type: "date-picker",
    label: "æ—¥æœŸ/æ—¥å†é€‰æ‹©",
    prop: "dateArry",
    pickerShow: false,
    pickerIndex: "dateStr2",
    rules: [{ required: true, message: "è¯·é€‰æ‹©æ—¥æœŸ" }],
    typeAttrs: {
      format: "YYYYå¹´MMæœˆDDæ—¥",
      model: "day", ///  day week month quarter year rang
      // start: "2024-01-01",
      // end: "2024-12-31",
    },
  },
  {
    type: "input",
    label: "", // ä¸éœ€è¦label
    prop: "no",
    placeholder: "è¯·è¾“å…¥ç”¨æˆ·å",
    rules: [{ required: true, message: "ä¸èƒ½ä¸ºç©º" }],
    formItemAttrs: {
      desc: "æ²¡æœ‰label",
      required: true,
      border: false,
    },
    typeAttrs: {
      color: "primary",
      focusColor: "green",
      prefix: "tmicon-user-fill",
      showBottomBotder: false,
      showClear: true,
      align: "right",
      transprent: false,
      right: true,
      slotRightName: "dy-inp-right",
      // callback: (e: any) => {
      //   console.log("ğŸ¥å›è°ƒå‡½æ•°===");
      //   console.log(e);
      // },
    },
  },
  {
    type: "input",
    label: "", // ä¸éœ€è¦label
    prop: "no",
    placeholder: "è¯·è¾“å…¥ç”¨æˆ·å",
    rules: [{ required: true, message: "ä¸èƒ½ä¸ºç©º" }],
    formItemAttrs: {
      required: true,
    },
    typeAttrs: {
      color: "primary",
      focusColor: "green",
      prefix: "tmicon-user-fill",
      showBottomBotder: false,
      showClear: true,
      align: "right",
      transprent: false,
      // codeImg: true,
      // codeImgAttrs: {
      //   src:
      //     "https://ts1.cn.mm.bing.net/th/id/R-C.ccd320596cb9b0499c2d9e89079c7990?rik=bo30tkANeNk4Aw&riu=http%3a%2f%2fwww.finebornchina.cn%2fuploads%2fallimg%2f140430%2f1-140430150445413.jpg&ehk=Hjpp13uPkWtPTUVLZH%2f7V3MKAnXYJJNjmjRq1TE136k%3d&risl=&pid=ImgRaw&r=0",
      //   callback: (e: any) => {
      //     console.log("ğŸ¥å›è°ƒå‡½æ•°===");
      //     console.log(e);
      //   },
      // },
    },
  },
  {
    type: "readme",
    label: "", // ä¸éœ€è¦label
    prop: "readme",
    rulesHide: true,
    typeAttrs: {
      color: "primary",
      label: "ã€Šåˆä½œåè®®/éšç§åè®®ã€‹",
      url: "https://www.baidu.com", // è¦è·³è½¬çš„åœ°å€
    },
  },
]);
const submit = (e: any) => {
  console.log("è¡¨å•é¡¹æ•°æ®", e);
  // è·å–æ ¼å¼åŒ–çš„ å›¾ç‰‡åœ°å€
  let a = dyFromRef.value.resultUrl(e.upload);
  console.log("éœ€è¦çš„æ ¼å¼åŒ–å›¾ç‰‡åœ°å€:", a);
};
// è¡¨å•å¸ƒå±€é…ç½®
const formPros = ref<FormProps>({
  // disabled: true,
  formBtns: [
    {
      formType: "submit",
      label: "æäº¤",
      formBtnAttrs: {
        // disabled: false,
      },
    },
  ],
  formBottomSlot: true,
  formBottomSlotName: "dy-bottom",
  formBottomSlotData: {
    sds: "ddd",
  },
});
</script>
<template>
  <!-- TODO: é€‰æ‹©çš„å›è°ƒ  -->
  <tm-app>
    <dy-form
      :options="options"
      v-model:formVal="formVal"
      @submit="submit"
      :formPros="formPros"
      ref="dyFromRef"
    >
      <template #dy-inp-right>
        <view> æˆ‘æ˜¯æ’æ§½ </view>
      </template>
      <template #dy-bottom="scope">
        <view> æˆ‘æ˜¯åº•éƒ¨æ’æ§½è¡¨å•çš„æ•°æ®{{ scope }} </view>
        <view> æˆ‘æ˜¯åº•éƒ¨æ’æ§½è¡¨å•çš„æ•°æ®{{ scope.data }} </view>
        <view> æˆ‘æ˜¯åº•éƒ¨æ’æ§½è¡¨å•çš„æ•°æ®{{ scope.model?.username }} </view>
      </template>
    </dy-form>
  </tm-app>
</template>
